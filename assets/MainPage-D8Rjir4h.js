import{v as r,M as a,u as o,j as e,H as c,L as l,o as m,s as n,n as d,a as h}from"./index-C1dRWSdc.js";function p(){return fetch("https://cinemaguide.skillbox.cc/movie/random").then(r).then(s=>s.json()).then(s=>a.parse(s))}const u=()=>{const s=o({queryFn:p,queryKey:["randomMovie"]});switch(s.status){case"pending":return e.jsx("div",{children:e.jsx("span",{children:" Загрузка"})});case"success":{const t=s.data;return e.jsx(c,{movie:t,onRandomClick:()=>s.refetch()})}case"error":return e.jsx("div",{children:e.jsx("span",{children:"Произошла ошибка"})})}},j=({position:s,posterUrl:t,title:i})=>e.jsxs("div",{className:"top-movies__item-card",children:[e.jsx("img",{src:t,alt:i,className:"top-movies__item-image"}),e.jsx("div",{className:"top-movies__rating-badge",children:e.jsx("span",{className:"top-movies__rating-value",children:s})})]}),v=({films:s})=>e.jsx("ul",{className:"top-movies__list",children:s.map((t,i)=>e.jsx("li",{className:"top-movies__item",children:e.jsx(l,{to:`/movie/${t.id}`,className:"top-movie-link",children:e.jsx(j,{posterUrl:t.posterUrl??"Недоступно",title:t.title,position:i+1})})},t.id))}),x=m({id:d(),title:n(),posterUrl:n().nullable()}),_=h(x);function g(){return fetch("https://cinemaguide.skillbox.cc/movie/top10").then(r).then(s=>s.json()).then(s=>_.parse(s))}const y=()=>{const s=o({queryFn:g,queryKey:["topFilms"]});switch(s.status){case"pending":return e.jsx("div",{children:e.jsx("span",{children:"Загрузка топ-фильмов..."})});case"success":return e.jsx(v,{films:s.data});case"error":return e.jsxs("div",{children:[e.jsx("span",{children:"Произошла ошибка"}),e.jsx("button",{onClick:()=>s.refetch(),children:"Повторить запрос"})]})}},F=()=>e.jsx("section",{className:"top-movies",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"top-movies__title",children:"Топ 10 фильмов"}),e.jsx(y,{})]})});function N(){return e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsx(F,{})]})}export{N as default};
